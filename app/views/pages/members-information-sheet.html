
<div class="container-fluid" style="padding-left: 5px; padding-right: 5px;">
    <div class="container members-information">
        <h3 class="text-center form-heading">MEMBERS INFORMATION SHEET</h3>
        <div class="row">
            <p class="text-label">MEMBER'S PERSONNAL INFORMATIONS:</p>
            <span style="color: red; font-size: 12px; margin-left: 15px;">*Denote required fields</span>
        </div>
        <div class="row">
            <div class="col-md-12">
                <form action="#" method="post" name="info">
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-12 col">
                                <label id="fn">FULL NAME (Lastname, Firstname MI.) <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="fullname" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-4 col-sm-4 col">
                                <label id="sign">CALL SIGN <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="call-sign" class="form-control" required="true">
                            </div>
                            <div class="col-md-4 col-sm-4 col">
                                <label id="chapter">CHAPTER <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="chapter" class="form-control" required="true">
                            </div>
                            <div class="col-md-4 col-sm-4 col">
                                <label id="contact">CONTACT NO. <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="contact" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-12 col">
                                <label id="emp">PRESENT EMPLOYMENT <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="employment" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-12 col">
                                <label id="home">HOME ADDRESS <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="address" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>DATE OF BIRTH <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="date-of-birth" class="form-control" required="true">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>PLACE OF BIRTH <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="palace-of-birth" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-3 col-sm-4 col">
                                <label id="citizen">CITIZENSHIP <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="citizen" class="form-control" required="true">
                            </div>
                            <div class="col-md-2 col-sm-4 col-xs-6 col">
                                <label>GENDER <span style="color: red; font-size: 12px;">*</span></label>
                                <select type="text" name="gender" class="form-control" required="true">
                                    <option value=""></option>
                                    <option value="MALE">MALE</option>
                                    <option value="FEMALE">FEMALE</option>
                                </select>
                            </div>
                            <div class="col-md-2 col-sm-4 col-xs-6 col">
                                <label>HEIGHT</label>
                                <input type="text" name="height" class="form-control">
                            </div>
                            <div class="col-md-2 col-sm-6 col-xs-6 col">
                                <label>WEIGHT</label>
                                <input type="text" name="weight" class="form-control">
                            </div>
                            <div class="col-md-3 col-sm-6 col-xs-6 col">
                                <label>BLOOD TYPE</label>
                                <input type="text" name="blood-type" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>IN CASE OF EMERGENCY, Pls notify <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="contact-person" class="form-control" required="true">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>RELATION <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="relation" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-12 col">
                                <label id="contact_ns">CONTACT NO.(s) <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="contact-person-num" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME OF FATHER <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="name-of-father" class="form-control" required="true">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>OCCUPATION <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="father-occupation" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME OF MOTHER <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="name-of-mother" class="form-control" required="true">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>OCCUPATION <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="mother-occupation" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <p class="text-label">EXISTING SET-UP/EQUIPMENT(Indicate quantity, if none, put 0):</p>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-2 col-sm-6 col">
                                <label>HR RADIO</label>
                                <input type="number" name="hf-radio" class="form-control">
                            </div>
                            <div class="col-md-2 col-sm-6 col">
                                <label>VHF RADIO</label>
                                <input type="number" name="vhf-radio" class="form-control">
                            </div>
                            <div class="col-md-2 col-sm-6 col">
                                <label>UHF RADIO</label>
                                <input type="number" name="uhf-radio" class="form-control">
                            </div>
                            <div class="col-md-3 col-sm-6 col">
                                <label>AERIAL ANTENNA</label>
                                <input type="number" name="antenna" class="form-control">
                            </div>
                            <div class="col-md-3 col-sm-6 col">
                                <label>SPARE BATTERY</label>
                                <input type="number" name="spare-battery" class="form-control">
                            </div>
                        </div>
                    </div> 
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-2 col-sm-6 col">
                                <label>GENERATOR</label>
                                <input type="number" name="generator" class="form-control">
                            </div>
                            <div class="col-md-2 col-sm-6 col">
                                <label>SOLAR PANEL</label>
                                <input type="number" name="solar-panel" class="form-control">
                            </div>
                            <div class="col-md-2 col-sm-6 col">
                                <label>BATTERY</label>
                                <input type="number" name="battery" class="form-control">
                            </div>
                            <div class="col-md-3 col-sm-6 col">
                                <label>MOBILE SET-UP</label>
                                <input type="number" name="mobile-set-up" class="form-control">
                            </div>
                            <div class="col-md-3 col-sm-6 col">
                                <label>DRONE</label>
                                <input type="number" name="drone" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <p class="text-label">NAME OF SIBLING/s (If single): CHILDREN (If married):</p>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME</label>
                                <input type="text" name="child-siblings-name[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME</label>
                                <input type="text" name="child-siblings-name[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME</label>
                                <input type="text" name="child-siblings-name[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME</label>
                                <input type="text" name="child-siblings-name[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME</label>
                                <input type="text" name="child-siblings-name[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>NAME</label>
                                <input type="text" name="child-siblings-name[]" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <p class="text-label">SCHOOLS ATTENDED:</p>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>SECONDARY</label>
                                <input type="text" name="school[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>DATE GRADUATED</label>
                                <input type="text" name="date-grad[]" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>COLLEGE</label>
                                <input type="text" name="school[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>DATE GRADUATED</label>
                                <input type="text" name="date-grad[]" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-6 col-sm-6 col">
                                <label>POST GRADUATE</label>
                                <input type="text" name="school[]" class="form-control">
                            </div>
                            <div class="col-md-6 col-sm-6 col">
                                <label>DATE GRADUATED</label>
                                <input type="text" name="date-grad[]" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <p class="text-label">MEMBER'S/USER ACCOUNTS:</p>
                    </div>
                    <div class="row">
                        <div class="form-group">
                            <div class="col-md-4 col-sm-4 col">
                                <label>USERNAME <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="text" name="username" class="form-control" required="true">
                            </div>
                            <div class="col-md-4 col-sm-4 col">
                                <label>PASSWORD <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="password" name="pass" class="form-control" required="true">
                            </div>
                            <div class="col-md-4 col-sm-4 col">
                                <label>CONFIRM PASSWORD <span style="color: red; font-size: 12px;">*</span></label>
                                <input type="password" name="cfm_pass" class="form-control" required="true">
                            </div>
                        </div>
                    </div>
                    <br>
                    <!-- <div class="row">
                        <p class="text-label"><input type="checkbox" name="verify" id="" class="checkbox" value="agreed" required><span class="text-certify">
                            I HEREBY CERITFY THAT THE FOREGOING ARE TRUE AND CORRECT to the best of my knowledge and belief.</span></p>
                    </div> 
                    <div class="row">
                        <div class="form-group" style="margin-top: -15px;">
                            <div class="col-md-2 col-sm-2"></div>
                            <div class="col-md-4 col-sm-4 col">
                                <input type="text" name="sign-at" class="form-control text-center" placeholder="SIGN AT" required="true">
                            </div>
                            <div class="col-md-4 col-sm-4 col">
                                <input type="text" name="date-sign" class="form-control text-center" placeholder="DATE" required="true">
                            </div>
                            <div class="col-md-2 col-sm-2"></div>
                        </div>
                    </div>   -->
                    <div class="row">
                        <div class="form-group" align="center" style="margin-top: 35px;">
                            <button type="submit" name="submit" class="btn btn-primary"><i class="fa fa-pencil"></i> SUBMIT</button>
                            <button type="button" name="cancel" class="btn btn-danger"><i class="fa fa-times"></i> CANCEL</button>
                            <?php if($this->session->userdata('user_type') != 'Guest' && $this->session->userdata('user_type') != 'Member'): ?>
                                <a href="<?= base_url(); ?>page/user/profile.html/<?= $this->session->userdata('user_call_sign'); ?>/" class="btn btn-info"><i class="fa fa-chevron-left"></i> MY PROFILE</a>
                            <?php endif; ?>
                        </div>
                    </div>  
                </form>            
            </div>
        </div>
        
    </div>
</div>
<script>
    $(document).ready(function(){

        $("input").focus(function(){
            $(this).parent().addClass('slide-up');
        })
        $("input").blur(function(){
            if($(this).val() == ""){
                $(this).parent().removeClass('slide-up');
            }
        })
        $("select").click(function(){
            $(this).parent().addClass('slide-up');
        })
        $("select").blur(function(){
            if($(this).val() == ""){
                $(this).parent().removeClass('slide-up');
            }
        })
        $("label").click(function(){
            $(this).parent().addClass('slide-up');
            $(this).parent().find('input').focus();
        })

        $('input[type="number"]').keyup(function(){
            if($(this).val() < 0){
                swal(
                    {
                        title: "INVALID NUMBER",
                        text : 'Number should not be in negative.',
                        type : "info",
                        showCancelButton  : false,
                        confirmButtonColor: "#48CDF5",
                        confirmButtonText : "OK",
                        cancelButtonText  : "",
                        closeOnConfirm    : true,
                        closeOnCancel     : false 
                    }
                );
                $(this).val('');
            }
        })
        $('input[type="number"]').change(function(){
            if($(this).val() < 0){
                swal(
                    {
                        title: "INVALID NUMBER",
                        text : 'Number should not be in negative.',
                        type : "info",
                        showCancelButton  : false,
                        confirmButtonColor: "#48CDF5",
                        confirmButtonText : "OK",
                        cancelButtonText  : "",
                        closeOnConfirm    : true,
                        closeOnCancel     : false 
                    }
                );
                $(this).val('');
            }
        })

        $('button[name="submit"]').click(function(e){
            e.preventDefault();
            var child_siblings = [], school = [], date_grad = [];

            if($('input[name="fullname"]').val() != '' && $('input[name="call-sign"]').val() != '' && $('input[name="chapter"]').val() != '' 
                && $('input[name="contact"]').val() != '' && $('input[name="employment"]').val() != '' && $('input[name="address"]').val() != '' 
                && $('input[name="date-of-birth"]').val() != '' && $('input[name="place-of-birth"]').val() != '' 
                && $('input[name="citizen"]').val() != '' && $('input[name="gender"]').val() != '' 
                && $('input[name="contact-person"]').val() != '' && $('input[name="relation"]').val() != '' 
                && $('input[name="contact-person-num"]').val() != '' && $('input[name="name-of-father"]').val() != '' 
                && $('input[name="father-occupation"]').val() != '' && $('input[name="name-of-mother"]').val() != '' 
                && $('input[name="mother-occupation"]').val() != '' && $('input[name="username"]').val() != '' && $('input[name="pass"]').val() != '' 
                && $('input[name="cfm_pass"]').val() != ''){

                $('input[name="child-siblings-name[]"]').each(function() {
                    if($(this).val() != ''){
                        child_siblings.push($(this).val());
                    }
                });
                $('input[name="school[]"]').each(function() {
                    if($(this).val() != ''){
                        school.push($(this).val());
                    }
                });
                $('input[name="date-grad[]"]').each(function() {
                    if($(this).val() != ''){
                        date_grad.push($(this).val());
                    }
                });

                console.log($('form[name="info"]').serialize() + child_siblings + school + date_grad);

                // if($('input[name="verify"]').is(':checked')){
                
                    if($('input[name="pass"]').val() == $('input[name="cfm_pass"]').val()){
                        $.ajax({
                            url: '<?= base_url(); ?>user/verify_call_sign/add-members/personnal_informations',
                            type: 'POST',
                            data: {
                                fullname: $('input[name="fullname"]').val(), 
                                call_sign : $('input[name="call-sign"]').val(), 
                                chapter : $('input[name="chapter"]').val(), 
                                contact : $('input[name="contact"]').val(), 
                                employment : $('input[name="employment"]').val(), 
                                address : $('input[name="address"]').val(), 
                                date_of_birth : $('input[name="date-of-birth"]').val(), 
                                palace_of_birth : $('input[name="palace-of-birth"]').val(), 
                                citizen : $('input[name="citizen"]').val(), 
                                gender : $('select[name="gender"]').val(), 
                                height : $('input[name="height"]').val(), 
                                weight : $('input[name="weight"]').val(), 
                                blood_type : $('input[name="blood-type"]').val(), 
                                contact_person : $('input[name="contact-person"]').val(), 
                                contact_person_num : $('input[name="contact-person-num"]').val(), 
                                relation : $('input[name="relation"]').val(), 
                                name_of_father : $('input[name="name-of-father"]').val(), 
                                father_occupation : $('input[name="father-occupation"]').val(), 
                                name_of_mother : $('input[name="name-of-mother"]').val(), 
                                mother_occupation : $('input[name="mother-occupation"]').val(),
                                sign_at : $('input[name="sign-at"]').val(),
                                date_sign : $('input[name="date-sign"]').val(),
                                hf_radio  : $('input[name="hf-radio"]').val(),
                                vhf_radio : $('input[name="vhf-radio"]').val() ,
                                uhf_radio : $('input[name="uhf-radio"]').val(),
                                antenna  : $('input[name="antenna"]').val(),
                                spare_battery  : $('input[name="spare-battery"]').val(),
                                generator  : $('input[name="generator"]').val(),
                                solar_panel  : $('input[name="solar-panel"]').val(),
                                battery  : $('input[name="battery"]').val(),
                                mobile_set_up  : $('input[name="mobile-set-up"]').val(),
                                drone : $('input[name="drone"]').val(),
                                username : $('input[name="username"]').val(),
                                pass : $('input[name="pass"]').val(),
                                child_siblings : child_siblings,
                                school : school,
                                date_grad : date_grad
                            },
                            success:function(data){
                                const log_oObj = JSON.parse(data);
                                console.log(log_oObj);
                                if(log_oObj.insert == true){
                                    if(log_oObj.user_type == 'Member'){
                                        swal(
                                            {
                                                title: "CONGRATULATIONS",
                                                text : 'Information saved. Redirecting....',
                                                type : "success",
                                                showCancelButton  : false,
                                                showConfirmButton  : false,
                                                confirmButtonColor: "#A5DC86",
                                                confirmButtonText : "OK",
                                                cancelButtonText  : "",
                                                closeOnConfirm    : true,
                                                closeOnCancel     : false 
                                            }
                                        );
                                        setTimeout(() => {
                                            window.location.href = '<?= base_url() ?>page/user/profile.html/' + log_oObj.user_call_sign + '/';
                                        }, 1500);
                                    }
                                    else{
                                        swal(
                                            {
                                                title: "SUCCESSFUL",
                                                text : log_oObj.message,
                                                type : "success",
                                                showCancelButton  : false,
                                                confirmButtonColor: "#A5DC86",
                                                confirmButtonText : "OK",
                                                cancelButtonText  : "",
                                                closeOnConfirm    : true,
                                                closeOnCancel     : false 
                                            }
                                        );
                                        $('form[name="info"]')[0].reset();
                                    }
                                }
                                else if(log_oObj.taken == true){
                                    swal(
                                        {
                                            title: "WARNING",
                                            text : log_oObj.message,
                                            type : "warning",
                                            showCancelButton  : false,
                                            confirmButtonColor: "#F8C886",
                                            confirmButtonText : "OK",
                                            cancelButtonText  : "",
                                            closeOnConfirm    : true,
                                            closeOnCancel     : false 
                                        }
                                    );
                                    $('input[name="call-sign"]').val('');
                                    $('input[name="call-sign"]').focus();
                                } 
                                else if(log_oObj.insert == false){
                                    swal(
                                        {
                                            title: "ERROR",
                                            text : log_oObj.message,
                                            type : "error",
                                            showCancelButton  : false,
                                            confirmButtonColor: "#F27474",
                                            confirmButtonText : "OK",
                                            cancelButtonText  : "",
                                            closeOnConfirm    : true,
                                            closeOnCancel     : false 
                                        }
                                    );

                                } 
                            }
                        })
                    }
                    else{
                        swal(
                            {
                                title: "MISMATCHED",
                                text : 'Password and confirm password did not matched.',
                                type : "warning",
                                showCancelButton  : false,
                                confirmButtonColor: "#F8C886",
                                confirmButtonText : "OK",
                                cancelButtonText  : "",
                                closeOnConfirm    : true,
                                closeOnCancel     : false 
                            }
                        );
                        $('input[name="cfm_pass"]').val('');
                        $('input[name="call-sign"]').focus();
                    }
                // }
                // else{
                //     swal(
                //         {
                //             title: "WARNING",
                //             text : 'Please check if the above info is true and correct.',
                //             type : "warning",
                //             showCancelButton  : false,
                //             confirmButtonColor: "#F8C886",
                //             confirmButtonText : "OK",
                //             cancelButtonText  : "",
                //             closeOnConfirm    : true,
                //             closeOnCancel     : false 
                //         }
                //     );
                // }
            }
            else{
                swal(
                    {
                        title: "WARNING",
                        text : 'All fields are required.',
                        type : "warning",
                        showCancelButton  : false,
                        confirmButtonColor: "#F8C886",
                        confirmButtonText : "OK",
                        cancelButtonText  : "",
                        closeOnConfirm    : true,
                        closeOnCancel     : false 
                    }
                );
            }
        })

        $('button[name="cancel"]').click(function(e){
            e.preventDefault();
            $('form[name="info"]')[0].reset();
        })
    })
</script>